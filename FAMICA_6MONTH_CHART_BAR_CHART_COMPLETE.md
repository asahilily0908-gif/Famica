# Famica 6ãƒ¶æœˆã‚°ãƒ©ãƒ• æ£’ã‚°ãƒ©ãƒ•åŒ– å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

**å®Ÿæ–½æ—¥**: 2026å¹´2æœˆ1æ—¥  
**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/widgets/six_month_chart_widget.dart`  
**ç›®çš„**: éŽåŽ»è¨˜éŒ²ï¼ˆ6ãƒ¶æœˆåˆ†ï¼‰ã®ã‚°ãƒ©ãƒ•ã‚’æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã‹ã‚‰æ£’ã‚°ãƒ©ãƒ•ã«å¤‰æ›´

---

## ðŸ“‹ å®Ÿæ–½å†…å®¹ã‚µãƒžãƒªãƒ¼

### å¤‰æ›´å†…å®¹
- **æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ï¼ˆLineChartï¼‰** â†’ **æ£’ã‚°ãƒ©ãƒ•ï¼ˆBarChartï¼‰** ã«å¤‰æ›´
- ã‚°ãƒ«ãƒ¼ãƒ—æ£’ã‚°ãƒ©ãƒ•ã‚’å®Ÿè£…ï¼ˆ2äººåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‚’æœˆã”ã¨ã«æ¨ªä¸¦ã³è¡¨ç¤ºï¼‰
- æ£’ã®è§’ã‚’ä¸¸ã‚ã‚‹ï¼ˆBorderRadius.circular(4)ï¼‰
- Yè»¸ã‚’æ•´æ•°ã‚¹ãƒ†ãƒƒãƒ—ã§è¡¨ç¤º

### ä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- `fl_chart` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç¶™ç¶šä½¿ç”¨

---

## ðŸ”§ å®Ÿè£…ã®è©³ç´°

### 1. ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—ã®å¤‰æ›´

**å¤‰æ›´å‰ï¼ˆæŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ï¼‰**:
```dart
LineChart(
  LineChartData(
    lineBarsData: [
      LineChartBarData(spots: mySpots, ...),
      LineChartBarData(spots: partnerSpots, ...),
    ],
  ),
)
```

**å¤‰æ›´å¾Œï¼ˆæ£’ã‚°ãƒ©ãƒ•ï¼‰**:
```dart
BarChart(
  BarChartData(
    barGroups: [
      BarChartGroupData(
        x: i,
        barRods: [
          BarChartRodData(toY: myCount, color: ãƒ”ãƒ³ã‚¯, ...),
          BarChartRodData(toY: partnerCount, color: ãƒ–ãƒ«ãƒ¼, ...),
        ],
      ),
    ],
  ),
)
```

---

### 2. ã‚°ãƒ«ãƒ¼ãƒ—æ£’ã‚°ãƒ©ãƒ•ã®å®Ÿè£…

å„æœˆã”ã¨ã«2æœ¬ã®æ£’ã‚’æ¨ªä¸¦ã³ã§è¡¨ç¤ºï¼š

```dart
barGroups.add(
  BarChartGroupData(
    x: i,  // æœˆã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
    barRods: [
      // è‡ªåˆ†ã®æ£’ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰
      BarChartRodData(
        toY: myCount,
        color: const Color(0xFFFF6FA5),
        width: 12,
        borderRadius: BorderRadius.circular(4),  // è§’ã‚’ä¸¸ã‚ã‚‹
      ),
      // ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®æ£’ï¼ˆãƒ–ãƒ«ãƒ¼ï¼‰
      BarChartRodData(
        toY: partnerCount,
        color: const Color(0xFF4A90E2),
        width: 12,
        borderRadius: BorderRadius.circular(4),  // è§’ã‚’ä¸¸ã‚ã‚‹
      ),
    ],
    barsSpace: 4,  // æ£’ã®é–“éš”
  ),
);
```

---

### 3. æ£’ã®ãƒ‡ã‚¶ã‚¤ãƒ³

**æ£’ã®å¹…**: 12px  
**è§’ã®ä¸¸ã¿**: BorderRadius.circular(4)  
**æ£’ã®é–“éš”**: 4px  
**é…è‰²**:
- ãƒ”ãƒ³ã‚¯ç³»ï¼ˆè‡ªåˆ†ï¼‰: `Color(0xFFFF6FA5)`
- ãƒ–ãƒ«ãƒ¼ç³»ï¼ˆãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼‰: `Color(0xFF4A90E2)`

---

### 4. Yè»¸ã®æ•´æ•°ã‚¹ãƒ†ãƒƒãƒ—è¨­å®š

Yè»¸ã¯æ•´æ•°ã®ã¿ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«èª¿æ•´ï¼š

```dart
// Yè»¸ã®ç¯„å›²ã‚’è¨ˆç®—ï¼ˆæ•´æ•°ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
final maxCount = allCounts.isEmpty ? 10.0 : allCounts.reduce((a, b) => a > b ? a : b);
final minY = 0.0;
final maxY = (maxCount + 2).ceilToDouble(); // æœ€å¤§å€¤+2ï¼ˆä½™ç™½ï¼‰
final interval = maxY <= 8 ? 1.0 : (maxY <= 16 ? 2.0 : (maxY / 5).ceilToDouble());

// Yè»¸ã®ãƒ©ãƒ™ãƒ«è¡¨ç¤º
getTitlesWidget: (value, meta) {
  // æ•´æ•°ã®ã¿è¡¨ç¤º
  if (value != value.toInt().toDouble()) {
    return const SizedBox.shrink();
  }
  if (value == meta.max || value == meta.min) {
    return const SizedBox.shrink();
  }
  return Text(
    value.toInt().toString(),
    style: const TextStyle(color: Colors.grey, fontSize: 11),
  );
}
```

**ãƒ­ã‚¸ãƒƒã‚¯**:
- `maxY <= 8`: interval = 1.0ï¼ˆ1, 2, 3, 4...ï¼‰
- `maxY <= 16`: interval = 2.0ï¼ˆ2, 4, 6, 8...ï¼‰
- `maxY > 16`: interval = maxY / 5ï¼ˆé©åˆ‡ã«åˆ†å‰²ï¼‰

---

### 5. Xè»¸ï¼ˆæœˆãƒ©ãƒ™ãƒ«ï¼‰ã®ç¶­æŒ

æ—¢å­˜ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç¶­æŒï¼š

```dart
bottomTitles: AxisTitles(
  sideTitles: SideTitles(
    showTitles: true,
    reservedSize: 28,
    getTitlesWidget: (value, meta) {
      final index = value.toInt();
      if (index >= 0 && index < monthLabels.length) {
        return Padding(
          padding: const EdgeInsets.only(top: 8),
          child: Text(
            monthLabels[index],  // ã€Œ1æœˆã€ã€Œ2æœˆã€...
            style: const TextStyle(color: Colors.grey, fontSize: 11),
          ),
        );
      }
      return const SizedBox.shrink();
    },
  ),
),
```

---

### 6. ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ï¼ˆã‚¿ãƒƒãƒ—æ™‚ã®è¡¨ç¤ºï¼‰

æ£’ã‚’ã‚¿ãƒƒãƒ—ã—ãŸæ™‚ã®æƒ…å ±è¡¨ç¤ºã‚’å®Ÿè£…ï¼š

```dart
barTouchData: BarTouchData(
  enabled: true,
  touchTooltipData: BarTouchTooltipData(
    tooltipBgColor: Colors.black87,
    tooltipPadding: const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
    tooltipRoundedRadius: 8,
    getTooltipItem: (group, groupIndex, rod, rodIndex) {
      final isMyData = rodIndex == 0;
      final name = isMyData ? widget.myName : widget.partnerName;
      return BarTooltipItem(
        '$name\n${rod.toY.toInt()}å›ž',
        const TextStyle(
          color: Colors.white,
          fontSize: 12,
          fontWeight: FontWeight.bold,
        ),
      );
    },
  ),
),
```

**è¡¨ç¤ºå†…å®¹**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å
- è¨˜éŒ²å›žæ•°ï¼ˆæ•´æ•°ï¼‰

ä¾‹: 
```
ã¾ã¤ã—ã¾
5å›ž
```

---

### 7. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ç„¡åŠ¹åŒ–

æ—¢å­˜ã®å®Ÿè£…ã‚’ç¶­æŒï¼š

```dart
BarChart(
  BarChartData(...),
  swapAnimationDuration: Duration.zero,  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç„¡åŠ¹åŒ–
)
```

---

## âœ… å¤‰æ›´å‰å¾Œã®æ¯”è¼ƒ

### Beforeï¼ˆæŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ï¼‰

- **è¡¨ç¤ºå½¢å¼**: æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ï¼ˆLineChartï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆ**: ä¸¸ã„ç‚¹ + ç·šã§æŽ¥ç¶š
- **è¦–è¦šçš„ç‰¹å¾´**: æŽ¨ç§»ãŒåˆ†ã‹ã‚Šã‚„ã™ã„
- **Yè»¸**: 2åˆ»ã¿ã¾ãŸã¯4åˆ†å‰²

### Afterï¼ˆæ£’ã‚°ãƒ©ãƒ•ï¼‰

- **è¡¨ç¤ºå½¢å¼**: ã‚°ãƒ«ãƒ¼ãƒ—æ£’ã‚°ãƒ©ãƒ•ï¼ˆBarChartï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒˆ**: 2æœ¬ã®æ£’ã‚’æ¨ªä¸¦ã³è¡¨ç¤º
- **è¦–è¦šçš„ç‰¹å¾´**: æœˆã”ã¨ã®æ¯”è¼ƒãŒã—ã‚„ã™ã„
- **Yè»¸**: æ•´æ•°ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆ1åˆ»ã¿ã€2åˆ»ã¿ã€ã¾ãŸã¯é©åˆ‡ã«åˆ†å‰²ï¼‰
- **æ£’ã®ãƒ‡ã‚¶ã‚¤ãƒ³**: è§’ãŒä¸¸ã„å„ªã—ã„ãƒ‡ã‚¶ã‚¤ãƒ³

---

## ðŸŽ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ã®ç‰¹å¾´

### Famicaã®å„ªã—ã„ãƒ‡ã‚¶ã‚¤ãƒ³ã«åˆã‚ã›ãŸå·¥å¤«

1. **è§’ã®ä¸¸ã¿**
   - `BorderRadius.circular(4)` ã§æŸ”ã‚‰ã‹ã„å°è±¡

2. **é…è‰²ã®ç¶­æŒ**
   - ãƒ”ãƒ³ã‚¯ç³»ï¼ˆ`#FF6FA5`ï¼‰: æ¸©ã‹ã¿ã®ã‚ã‚‹è‰²
   - ãƒ–ãƒ«ãƒ¼ç³»ï¼ˆ`#4A90E2`ï¼‰: è½ã¡ç€ã„ãŸè‰²

3. **é©åˆ‡ãªé–“éš”**
   - æ£’ã®å¹…: 12px
   - æ£’ã®é–“éš”: 4px
   - ã‚°ãƒ«ãƒ¼ãƒ—é–“ã¯è‡ªå‹•èª¿æ•´

4. **ã‚°ãƒªãƒƒãƒ‰ç·š**
   - ç ´ç·šã§æŽ§ãˆã‚ã«è¡¨ç¤º
   - æ°´å¹³ç·šã®ã¿ï¼ˆåž‚ç›´ç·šãªã—ï¼‰

---

## ðŸ“Š è¡¨ç¤ºä¾‹

```
          [å‡¡ä¾‹]
      â— ã¾ã¤ã—ã¾  â— ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼

   8 |  
     |  
   6 |       â–ˆâ–ˆ        
     |       â–ˆâ–ˆ  â–ˆâ–ˆ    
   4 |  â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ
     |  â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ
   2 |  â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ
     |  â–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ
   0 |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      1æœˆ  2æœˆ  3æœˆ  4æœˆ  5æœˆ  6æœˆ
```

â€» ãƒ”ãƒ³ã‚¯è‰²ã®æ£’ã¨ãƒ–ãƒ«ãƒ¼è‰²ã®æ£’ãŒå„æœˆã«2æœ¬ä¸¦ã³ã¾ã™

---

## ðŸ§ª ãƒ†ã‚¹ãƒˆé …ç›®

### å‹•ä½œç¢ºèª

- [ ] æ£’ã‚°ãƒ©ãƒ•ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] 2äººåˆ†ã®æ£’ãŒæ¨ªä¸¦ã³ã§è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] æ£’ã®è§’ãŒä¸¸ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] Yè»¸ãŒæ•´æ•°ã‚¹ãƒ†ãƒƒãƒ—ã§è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] Xè»¸ã«æœˆãƒ©ãƒ™ãƒ«ï¼ˆã€Œ1æœˆã€ã€Œ2æœˆã€...ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] æ£’ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å‡¡ä¾‹ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã€Œå†…è¨³ã€ãƒœã‚¿ãƒ³ã§ãƒ‰ãƒ¼ãƒŠãƒ„ã‚°ãƒ©ãƒ•ã«åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹

### ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹

- [ ] ãƒ‡ãƒ¼ã‚¿ãŒ0ä»¶ã®å ´åˆã€ç©ºçŠ¶æ…‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ‡ãƒ¼ã‚¿ãŒ1ãƒ¶æœˆåˆ†ã®ã¿ã®å ´åˆã§ã‚‚æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] æœ€å¤§å€¤ãŒå¤§ãã„å ´åˆã§ã‚‚Yè»¸ãŒé©åˆ‡ã«èª¿æ•´ã•ã‚Œã‚‹
- [ ] æœ€å¤§å€¤ãŒå°ã•ã„å ´åˆã§ã‚‚Yè»¸ãŒé©åˆ‡ã«èª¿æ•´ã•ã‚Œã‚‹ï¼ˆ1åˆ»ã¿ï¼‰

---

## ðŸ“ ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒ¡ãƒ¢

### ãƒ¡ã‚½ãƒƒãƒ‰åã®å¤‰æ›´ã«ã¤ã„ã¦

ãƒ¡ã‚½ãƒƒãƒ‰å `_buildPerUserRecordCountChart()` ã¯å¤‰æ›´ã—ã¦ã„ã¾ã›ã‚“ã€‚
ã‚³ãƒ¡ãƒ³ãƒˆã¯ã€Œæ£’ã‚°ãƒ©ãƒ•ã€ã«æ›´æ–°ã—ã¾ã—ãŸã€‚

```dart
/// A. æ£’ã‚°ãƒ©ãƒ•ï¼ˆè¨˜éŒ²å›žæ•°ï¼‰- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®2ç³»åˆ—
Widget _buildPerUserRecordCountChart() {
```

### ãã®ä»–ã®æ©Ÿèƒ½ã¯ç¶­æŒ

- ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ï¼ˆã‚°ãƒ©ãƒ• â‡” å†…è¨³ï¼‰ã¯æ—¢å­˜ã®ã¾ã¾
- ãƒ‰ãƒ¼ãƒŠãƒ„ã‚°ãƒ©ãƒ•ï¼ˆå†…è¨³ï¼‰ã¯å¤‰æ›´ãªã—
- å‡¡ä¾‹ã®è¡¨ç¤ºã¯æ—¢å­˜ã®ã¾ã¾
- ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã¯æ—¢å­˜ã®ã¾ã¾

---

## ðŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **å‹•ä½œç¢ºèª**:
   ```bash
   flutter run
   ```

2. **å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ**:
   - iOS & Android ã§æ£’ã‚°ãƒ©ãƒ•ã®è¡¨ç¤ºã‚’ç¢ºèª
   - ã‚¿ãƒƒãƒ—æ“ä½œï¼ˆãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ï¼‰ã‚’ç¢ºèª
   - ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã®å‹•ä½œã‚’ç¢ºèª

3. **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ç¢ºèª**:
   - æ£’ã®è§’ãŒä¸¸ãè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹
   - é…è‰²ãŒ Famica ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã«åˆã£ã¦ã„ã‚‹ã‹
   - é–“éš”ãŒé©åˆ‡ã‹

---

## ðŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `FAMICA_6MONTH_CHART_FLCHART_FIX_COMPLETE.md` - fl_chart ã¸ã®ç§»è¡Œå®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ
- `FAMICA_6MONTH_CHART_PERUSER_TOGGLE_COMPLETE.md` - ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆå®Ÿè£…
- `FAMICA_6MONTH_CHART_AGGREGATION_FIX_COMPLETE.md` - é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ä¿®æ­£
- `FAMICA_6MONTH_CHART_SIMPLIFICATION_COMPLETE.md` - ã‚·ãƒ³ãƒ—ãƒ«åŒ–å®Ÿè£…

---

**å®Ÿè£…å®Œäº†æ—¥æ™‚**: 2026å¹´2æœˆ1æ—¥ 01:17  
**å®Ÿè£…è€…**: AI Assistant  
**æ¬¡å›žã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: å®Ÿæ©Ÿã§ã®å‹•ä½œç¢ºèª
