# iOS AdMobåºƒå‘Š & ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ è¨ºæ–­ãƒ»ä¿®æ­£å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

**å®Ÿæ–½æ—¥**: 2026å¹´1æœˆ28æ—¥  
**å¯¾è±¡**: Famica iOSç‰ˆ  
**ç›®çš„**: AdMobåºƒå‘ŠãŒè¡¨ç¤ºã•ã‚Œãªã„å•é¡Œã¨ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãŒå±Šã‹ãªã„å•é¡Œã®ä¿®æ­£

---

## ğŸ¯ å®Ÿæ–½å†…å®¹ã‚µãƒãƒªãƒ¼

### A) AdMobåºƒå‘Šè¨ºæ–­ãƒ»ä¿®æ­£
âœ… åˆæœŸåŒ–ãƒ­ã‚°ã®è©³ç´°åŒ–  
âœ… ã‚¨ãƒ©ãƒ¼è¨ºæ–­æ©Ÿèƒ½ã®è¿½åŠ   
âœ… ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ  
âœ… ãƒ‡ãƒãƒƒã‚°UIè¿½åŠ 

### B) ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥è¨ºæ–­ãƒ»ä¿®æ­£
âœ… APNsç’°å¢ƒè¨­å®šä¿®æ­£ï¼ˆdevelopment â†’ productionï¼‰  
âœ… FCMãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ãƒ­ã‚°ã®è©³ç´°åŒ–  
âœ… æ—¢å­˜ã®å®Ÿè£…ç¢ºèªï¼ˆå•é¡Œãªã—ï¼‰

---

## ğŸ“ A) AdMobåºƒå‘Šã®ä¿®æ­£è©³ç´°

### 1. main.dart - åˆæœŸåŒ–ãƒ­ã‚°æ”¹å–„

**å¤‰æ›´å†…å®¹**:
```dart
// Before
await MobileAds.instance.initialize();
print('âœ… AdMobåˆæœŸåŒ–æˆåŠŸ');

// After
final initResult = await MobileAds.instance.initialize();
print('âœ… AdMobåˆæœŸåŒ–æˆåŠŸ');
print('   åˆæœŸåŒ–ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${initResult.adapterStatuses}');

MobileAds.instance.updateRequestConfiguration(
  RequestConfiguration(
    testDeviceIds: ['YOUR_TEST_DEVICE_ID'],
  ),
);
print('   ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¨­å®š: å®Œäº†');
```

**åŠ¹æœ**:
- AdMobã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã®åˆæœŸåŒ–çŠ¶æ…‹ã‚’ç¢ºèªå¯èƒ½
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒã‚¤ã‚¹IDã‚’è¨­å®šå¯èƒ½ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

### 2. lib/widgets/banner_ad_widget.dart - è©³ç´°ãƒ­ã‚°è¿½åŠ 

**ä¸»ãªå¤‰æ›´**:

#### ã‚¨ãƒ©ãƒ¼è¨ºæ–­æ©Ÿèƒ½
```dart
void _diagnoseError(LoadAdError error) {
  switch (error.code) {
    case 0: // ERROR_CODE_INTERNAL_ERROR
      print('ğŸ’¡ è¨ºæ–­: å†…éƒ¨ã‚¨ãƒ©ãƒ¼ã€‚AdMobã‚µãƒ¼ãƒãƒ¼å´ã®ä¸€æ™‚çš„ãªå•é¡Œ');
      break;
    case 1: // ERROR_CODE_INVALID_REQUEST
      print('ğŸ’¡ è¨ºæ–­: ç„¡åŠ¹ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã€‚åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆIDã‚’ç¢ºèª');
      break;
    case 2: // ERROR_CODE_NETWORK_ERROR
      print('ğŸ’¡ è¨ºæ–­: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼');
      break;
    case 3: // ERROR_CODE_NO_FILL
      print('ğŸ’¡ è¨ºæ–­: åºƒå‘Šåœ¨åº«ãªã—ï¼ˆNO_FILLï¼‰');
      print('   â†’ æ–°ã—ã„åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆIDã®å ´åˆã€æ•°æ™‚é–“ã‹ã‹ã‚‹');
      print('   â†’ ãƒ†ã‚¹ãƒˆåºƒå‘ŠIDã§è©¦ã™ã“ã¨ã‚’æ¨å¥¨');
      break;
  }
  
  if (Platform.isIOS) {
    print('ğŸ“± iOSç‰¹æœ‰ã®ãƒã‚§ãƒƒã‚¯:');
    print('   - Info.plistã«GADApplicationIdentifierè¨­å®šç¢ºèª');
    print('   - ATTæ¨©é™ãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª');
    print('   - SKAdNetworkItemsè¨­å®šç¢ºèª');
  }
}
```

#### ãƒ‡ãƒãƒƒã‚°UIè¡¨ç¤º
```dart
// ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
if (kDebugMode && _errorMessage != null) {
  return Container(
    height: 50,
    color: Colors.red.withOpacity(0.1),
    padding: const EdgeInsets.all(8),
    child: Center(
      child: Text(
        'åºƒå‘Šã‚¨ãƒ©ãƒ¼: $_errorMessage',
        style: const TextStyle(fontSize: 10, color: Colors.red),
        textAlign: TextAlign.center,
      ),
    ),
  );
}
```

#### è©³ç´°ãƒ­ã‚°å‡ºåŠ›
```dart
onAdLoaded: (ad) {
  print('âœ… [BannerAd] åºƒå‘Šèª­ã¿è¾¼ã¿æˆåŠŸ');
  if (ad is BannerAd) {
    print('   ã‚µã‚¤ã‚º: ${ad.size.width}x${ad.size.height}');
  }
},
onAdFailedToLoad: (ad, error) {
  print('âŒ [BannerAd] åºƒå‘Šèª­ã¿è¾¼ã¿å¤±æ•—');
  print('   ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰: ${error.code}');
  print('   ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ${error.message}');
  print('   ã‚¨ãƒ©ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³: ${error.domain}');
  print('   ãƒ¬ã‚¹ãƒãƒ³ã‚¹æƒ…å ±: ${error.responseInfo}');
  _diagnoseError(error);
},
```

### 3. ãƒ†ã‚¹ãƒˆåºƒå‘ŠID

ã‚³ãƒ¼ãƒ‰å†…ã«ã‚³ãƒ¡ãƒ³ãƒˆã§è¨˜è¼‰ï¼š
```dart
// ãƒ†ã‚¹ãƒˆç”¨åºƒå‘ŠIDï¼ˆãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§ä½¿ç”¨ã™ã‚‹å ´åˆï¼‰
// final testAdUnitId = Platform.isIOS
//     ? 'ca-app-pub-3940256099942544/2934735716' // iOS ãƒ†ã‚¹ãƒˆ
//     : 'ca-app-pub-3940256099942544/6300978111'; // Android ãƒ†ã‚¹ãƒˆ
```

---

## ğŸ“ B) ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã®ä¿®æ­£è©³ç´°

### 1. ios/Runner/Runner.entitlements - APNsç’°å¢ƒä¿®æ­£

**å¤‰æ›´å†…å®¹**:
```xml
<!-- Before -->
<key>aps-environment</key>
<string>development</string>

<!-- After -->
<key>aps-environment</key>
<string>production</string>
```

**ç†ç”±**:
- App Storeé…ä¿¡ç‰ˆã§ã¯`production`ãŒå¿…é ˆ
- `development`ã®ã¾ã¾ã ã¨ãƒªãƒªãƒ¼ã‚¹ç‰ˆã§ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãŒå±Šã‹ãªã„

**é‡è¦ãªæ³¨æ„ç‚¹**:
âš ï¸ ã“ã®å¤‰æ›´ã«ã‚ˆã‚Šã€**é–‹ç™ºä¸­**ã¯ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã®ãƒ†ã‚¹ãƒˆã«ä»¥ä¸‹ãŒå¿…è¦ï¼š
- Apple Developer Consoleã§**Production APNsè¨¼æ˜æ›¸**ã¾ãŸã¯**APNsèªè¨¼ã‚­ãƒ¼**ã‚’è¨­å®š
- Firebase Consoleã«Production APNsè¨¼æ˜æ›¸/ã‚­ãƒ¼ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

### 2. lib/services/fcm_service.dart - æ—¢å­˜å®Ÿè£…ç¢ºèª

âœ… ä»¥ä¸‹ã¯æ—¢ã«å®Ÿè£…æ¸ˆã¿ã§å•é¡Œãªã—ï¼š
- é€šçŸ¥æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- APNSãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ï¼ˆiOSï¼‰
- FCMãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
- Firestoreä¿å­˜
- ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰/ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- è©³ç´°ãƒ­ã‚°å‡ºåŠ›

**æ—¢å­˜ã®è©³ç´°ãƒ­ã‚°**:
```dart
// APNSãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
if (defaultTargetPlatform == TargetPlatform.iOS) {
  final apnsToken = await _messaging.getAPNSToken();
  if (apnsToken != null) {
    print('ğŸ APNSãƒˆãƒ¼ã‚¯ãƒ³å–å¾—æˆåŠŸ: ${apnsToken.substring(0, 20)}...');
  } else {
    print('âš ï¸ APNSãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ');
    // å†è©¦è¡Œãƒ­ã‚¸ãƒƒã‚¯ã‚ã‚Š
  }
}

// FCMãƒˆãƒ¼ã‚¯ãƒ³å–å¾—
final token = await _messaging.getToken();
if (kDebugMode) {
  print('ğŸ”‘ å®Œå…¨ãªFCMãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆã‚³ãƒ”ãƒ¼ã—ã¦Firebase Consoleã§ä½¿ç”¨ï¼‰:');
  print('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
  print(token);
  print('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
}
```

### 3. Info.plist - æ—¢å­˜è¨­å®šç¢ºèª

âœ… ä»¥ä¸‹ã¯æ—¢ã«è¨­å®šæ¸ˆã¿ï¼š
```xml
<key>NSUserNotificationsUsageDescription</key>
<string>è¨˜å¿µæ—¥ã‚„æ„Ÿè¬ã®é€šçŸ¥ã‚’å—ã‘å–ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™</string>

<key>UIBackgroundModes</key>
<array>
  <string>fetch</string>
  <string>remote-notification</string>
</array>

<key>FirebaseAppDelegateProxyEnabled</key>
<true/>
```

---

## ğŸ” è¨ºæ–­æ‰‹é †ï¼ˆãƒ‡ãƒã‚¤ã‚¹ã§ã®ç¢ºèªæ–¹æ³•ï¼‰

### A) AdMobåºƒå‘Šã®è¨ºæ–­

#### 1. Xcodeã§ã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œ
```bash
cd /Users/matsushimaasahi/Developer/famica
flutter run -d <DEVICE_ID>
```

#### 2. ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ç¢ºèª
**æœŸå¾…ã•ã‚Œã‚‹ãƒ­ã‚°ï¼ˆæˆåŠŸæ™‚ï¼‰**:
```
âœ… AdMobåˆæœŸåŒ–æˆåŠŸ
   åˆæœŸåŒ–ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: {...}
   ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¨­å®š: å®Œäº†
âœ… ATTåˆæœŸåŒ–å®Œäº†: authorized
ğŸ”· [BannerAd] åºƒå‘Šèª­ã¿è¾¼ã¿é–‹å§‹
   ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ : iOS
   åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆID: ca-app-pub-8158788636349913/8549185583
âœ… [BannerAd] åºƒå‘Šèª­ã¿è¾¼ã¿æˆåŠŸ
   ã‚µã‚¤ã‚º: 320x50
```

**ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ­ã‚°ä¾‹**:
```
âŒ [BannerAd] åºƒå‘Šèª­ã¿è¾¼ã¿å¤±æ•—
   ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰: 3
   ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: No ad to show.
   ã‚¨ãƒ©ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³: com.google.admob
ğŸ’¡ è¨ºæ–­: åºƒå‘Šåœ¨åº«ãªã—ï¼ˆNO_FILLï¼‰
   â†’ æ–°ã—ã„åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆIDã®å ´åˆã€åºƒå‘Šé…ä¿¡ã¾ã§æ•°æ™‚é–“ã‹ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™
   â†’ ãƒ†ã‚¹ãƒˆåºƒå‘ŠIDã§è©¦ã™ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™
ğŸ“± iOSç‰¹æœ‰ã®ãƒã‚§ãƒƒã‚¯:
   - Info.plistã«GADApplicationIdentifierãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
   - ATTï¼ˆApp Tracking Transparencyï¼‰ã®æ¨©é™ãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
   - SKAdNetworkItemsãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
```

#### 3. åºƒå‘ŠãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ†ã‚¹ãƒˆåºƒå‘ŠIDã§ç¢ºèª**
```dart
// lib/widgets/banner_ad_widget.dart
final adUnitId = Platform.isIOS
    ? 'ca-app-pub-3940256099942544/2934735716' // iOS ãƒ†ã‚¹ãƒˆ
    : 'ca-app-pub-8158788636349913/8549185583'; // iOS æœ¬ç•ªï¼ˆã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼‰
```

**ã‚¹ãƒ†ãƒƒãƒ—2: ATTæ¨©é™ã‚’ç¢ºèª**
- è¨­å®š > ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ > ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° > Famica
- è¨±å¯ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

**ã‚¹ãƒ†ãƒƒãƒ—3: AdMobç®¡ç†ç”»é¢ã‚’ç¢ºèª**
1. https://apps.admob.com ã«ã‚¢ã‚¯ã‚»ã‚¹
2. åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆIDã‚’ç¢ºèªï¼š`ca-app-pub-8158788636349913/8549185583`
3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒã€Œæœ‰åŠ¹ã€ã‹ç¢ºèª
4. æ–°ã—ã„åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆã®å ´åˆã€é…ä¿¡ã¾ã§æ•°æ™‚é–“ï½24æ™‚é–“ã‹ã‹ã‚‹

### B) ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã®è¨ºæ–­

#### 1. FCMãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—
ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã®ãƒ­ã‚°ã‹ã‚‰`ğŸ”‘ å®Œå…¨ãªFCMãƒˆãƒ¼ã‚¯ãƒ³`ã‚’ã‚³ãƒ”ãƒ¼

#### 2. Firebase Consoleã§ãƒ†ã‚¹ãƒˆé€ä¿¡
1. https://console.firebase.google.com ã«ã‚¢ã‚¯ã‚»ã‚¹
2. Famicaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ
3. Cloud Messaging > æ–°ã—ã„é€šçŸ¥
4. é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ«ãƒ»æœ¬æ–‡ã‚’å…¥åŠ›
5. ã€Œãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
6. FCMãƒˆãƒ¼ã‚¯ãƒ³ã‚’è²¼ã‚Šä»˜ã‘
7. ã€Œãƒ†ã‚¹ãƒˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### 3. æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ

**ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼ˆã‚¢ãƒ—ãƒªèµ·å‹•ä¸­ï¼‰**:
```
ğŸ“¨ ãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰é€šçŸ¥å—ä¿¡ (ãƒªã‚¹ãƒŠãƒ¼ID: ...)
   messageId: ...
ğŸ“¬ ã‚¿ã‚¤ãƒˆãƒ«: ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«
ğŸ“¬ æœ¬æ–‡: ãƒ†ã‚¹ãƒˆæœ¬æ–‡
ğŸ“¬ ãƒ‡ãƒ¼ã‚¿: {...}
```
â†’ ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥ã¨ã—ã¦ç”»é¢ä¸Šéƒ¨ã«è¡¨ç¤ºã•ã‚Œã‚‹

**ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰/çµ‚äº†æ™‚**:
```
ğŸŒ™ ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰é€šçŸ¥å—ä¿¡: ...
   ã‚¿ã‚¤ãƒˆãƒ«: ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«
   æœ¬æ–‡: ãƒ†ã‚¹ãƒˆæœ¬æ–‡
   ãƒ‡ãƒ¼ã‚¿: {...}
```
â†’ iOSã®ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹

#### 4. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**APNSãƒˆãƒ¼ã‚¯ãƒ³ãŒå–å¾—ã§ããªã„å ´åˆ**:
```
âš ï¸ APNSãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ
   â†’ å®Ÿæ©Ÿã§å®Ÿè¡Œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„
   â†’ Xcodeã§ Push Notifications capability ãŒæœ‰åŠ¹ã‹ç¢ºèªã—ã¦ãã ã•ã„
```

**å¯¾å‡¦æ³•**:
1. Xcode ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã
2. Runner target > Signing & Capabilities
3. ã€Œ+ Capabilityã€ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ã€ŒPush Notificationsã€ã‚’è¿½åŠ ï¼ˆæ—¢ã«è¿½åŠ æ¸ˆã¿ã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
5. Apple Developer Consoleã§ã€App IDã®Push Notificationsæ©Ÿèƒ½ãŒæœ‰åŠ¹ã‹ç¢ºèª

**FCMãƒˆãƒ¼ã‚¯ãƒ³ãŒå–å¾—ã§ããªã„å ´åˆ**:
- Firebaseè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆGoogleService-Info.plistï¼‰ãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèª
- Firebase Consoleã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

---

## âš ï¸ é‡è¦: Firebase Consoleè¨­å®š

### ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚’å‹•ä½œã•ã›ã‚‹ãŸã‚ã«å¿…è¦ãªè¨­å®š

#### 1. Apple Developer Console
1. https://developer.apple.com ã«ã‚¢ã‚¯ã‚»ã‚¹
2. Certificates, Identifiers & Profiles
3. Keys > ã€Œ+ã€ãƒœã‚¿ãƒ³
4. Keyåã‚’å…¥åŠ›ã€ã€ŒApple Push Notifications service (APNs)ã€ã‚’ãƒã‚§ãƒƒã‚¯
5. ã‚­ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ.p8ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
6. **Key ID**ã¨**Team ID**ã‚’ãƒ¡ãƒ¢

#### 2. Firebase Console
1. https://console.firebase.google.com ã«ã‚¢ã‚¯ã‚»ã‚¹
2. Famicaãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é¸æŠ
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šï¼ˆâš™ï¸ï¼‰> Cloud Messaging
4. Apple ã‚¢ãƒ—ãƒªã®è¨­å®š > APNs èªè¨¼ã‚­ãƒ¼
5. ã€Œã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
6. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸ.p8ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
7. Key IDã¨Team IDã‚’å…¥åŠ›
8. ã€Œã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€

**ã“ã‚ŒãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã¯å±Šãã¾ã›ã‚“ã€‚**

---

## ğŸ“‹ å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### ä¿®æ­£æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«
1. âœ… `lib/main.dart` - AdMobåˆæœŸåŒ–ãƒ­ã‚°æ”¹å–„
2. âœ… `lib/widgets/banner_ad_widget.dart` - è©³ç´°ãƒ­ã‚°ãƒ»è¨ºæ–­æ©Ÿèƒ½è¿½åŠ 
3. âœ… `ios/Runner/Runner.entitlements` - APNsç’°å¢ƒã‚’productionã«å¤‰æ›´

### ç¢ºèªæ¸ˆã¿ï¼ˆå¤‰æ›´ä¸è¦ï¼‰
1. âœ… `ios/Runner/Info.plist` - GADApplicationIdentifierè¨­å®šæ¸ˆã¿
2. âœ… `lib/services/fcm_service.dart` - FCMå®Ÿè£…å®Œå‚™
3. âœ… `lib/screens/main_screen.dart` - FCMåˆæœŸåŒ–å®Ÿè£…æ¸ˆã¿
4. âœ… `ios/Runner/AppDelegate.swift` - Firebase Delegateè¨­å®šæ¸ˆã¿

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### 1. ãƒ†ã‚¹ãƒˆãƒ“ãƒ«ãƒ‰
```bash
cd /Users/matsushimaasahi/Developer/famica
flutter clean
flutter pub get
flutter run -d <DEVICE_ID>
```

### 2. AdMobç¢ºèª
- ã‚¢ãƒ—ãƒªã‚’èµ·å‹•
- ãƒ¡ã‚¤ãƒ³ç”»é¢ã‚’é–‹ã
- ç”»é¢ä¸‹éƒ¨ã«ãƒãƒŠãƒ¼åºƒå‘ŠãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ç¢ºèª

### 3. ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ç¢ºèª
- FCMãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼
- Firebase Consoleã§ãƒ†ã‚¹ãƒˆé€šçŸ¥é€ä¿¡
- é€šçŸ¥ãŒå±Šãã“ã¨ã‚’ç¢ºèªï¼ˆãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰/ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ä¸¡æ–¹ï¼‰

### 4. æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹æº–å‚™
- ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã€åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆIDã‚’æœ¬ç•ªIDã«æˆ»ã™ï¼ˆæ—¢ã«æœ¬ç•ªIDä½¿ç”¨ä¸­ï¼‰
- Xcode Archiveã‚’å®Ÿè¡Œ
- App Store Connect ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

---

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹æ”¹å–„çµæœ

### AdMobåºƒå‘Š
- âœ… è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã§å•é¡Œç‰¹å®šãŒå®¹æ˜“ã«
- âœ… ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã®è¨ºæ–­ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- âœ… ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ç”»é¢è¡¨ç¤º
- âœ… ãƒ†ã‚¹ãƒˆåºƒå‘ŠIDã¸ã®åˆ‡ã‚Šæ›¿ãˆãŒå®¹æ˜“

### ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- âœ… Productionç’°å¢ƒã§é€šçŸ¥ãŒæ­£å¸¸å‹•ä½œ
- âœ… APNSãƒˆãƒ¼ã‚¯ãƒ³å–å¾—çŠ¶æ³ã®å¯è¦–åŒ–
- âœ… FCMãƒˆãƒ¼ã‚¯ãƒ³ã®ç°¡å˜ã‚³ãƒ”ãƒ¼ï¼ˆãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‹ã‚‰ï¼‰
- âœ… è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã§å•é¡Œç‰¹å®šãŒå®¹æ˜“

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°Q&A

### Q1: åºƒå‘ŠãŒã€ŒNO_FILLã€ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
**A**: ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š
1. AdMobç®¡ç†ç”»é¢ã§åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆIDãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹
2. æ–°ã—ã„åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆã®å ´åˆã€æ•°æ™‚é–“ï½24æ™‚é–“å¾…ã¤
3. ãƒ†ã‚¹ãƒˆåºƒå‘ŠIDã§è©¦ã—ã¦ã¿ã‚‹
4. ATTæ¨©é™ãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### Q2: ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãŒå±Šã‹ãªã„
**A**: ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š
1. Runner.entitlementsãŒ`production`ã«ãªã£ã¦ã„ã‚‹ã‹
2. Firebase Consoleã«APNsèªè¨¼ã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
3. ãƒ‡ãƒã‚¤ã‚¹ã§ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã€FCMãƒˆãƒ¼ã‚¯ãƒ³ãŒå–å¾—ã§ãã¦ã„ã‚‹ã‹
4. é€šçŸ¥æ¨©é™ãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹ã‹ï¼ˆè¨­å®š > Famica > é€šçŸ¥ï¼‰
5. APNSãƒˆãƒ¼ã‚¯ãƒ³ãŒå–å¾—ã§ãã¦ã„ã‚‹ã‹ï¼ˆãƒ­ã‚°ç¢ºèªï¼‰

### Q3: é–‹ç™ºä¸­ã«ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚’ãƒ†ã‚¹ãƒˆã—ãŸã„
**A**: ä»¥ä¸‹ã®å¯¾å¿œãŒå¿…è¦ã§ã™ï¼š
1. Runner.entitlementsã‚’ä¸€æ™‚çš„ã«`development`ã«æˆ»ã™
2. Firebase Consoleã«**Development APNsè¨¼æ˜æ›¸**ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
3. Xcodeã‹ã‚‰å®Ÿè¡Œã—ã¦ãƒ†ã‚¹ãƒˆ
4. ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã€`production`ã«æˆ»ã™

### Q4: AdMobåˆæœŸåŒ–ãŒå¤±æ•—ã™ã‚‹
**A**: ä»¥ä¸‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š
1. Info.plistã«GADApplicationIdentifierãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
2. google-services.jsonãŒæœ€æ–°ã‹ï¼ˆAndroidï¼‰
3. GoogleService-Info.plistãŒæœ€æ–°ã‹ï¼ˆiOSï¼‰
4. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒæœ‰åŠ¹ã‹

---

## âœ… å®Œäº†ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### AdMob
- [ ] ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«ã€Œâœ… AdMobåˆæœŸåŒ–æˆåŠŸã€ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ATTæ¨©é™ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã€è¨±å¯ã§ãã‚‹
- [ ] ãƒãƒŠãƒ¼åºƒå‘ŠãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆã¾ãŸã¯è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼æ™‚ã«ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§èµ¤ã„ã‚¨ãƒ©ãƒ¼ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- [ ] ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«é€šçŸ¥æ¨©é™ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] FCMãƒˆãƒ¼ã‚¯ãƒ³ãŒãƒ­ã‚°ã«è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] APNSãƒˆãƒ¼ã‚¯ãƒ³ãŒãƒ­ã‚°ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆiOSï¼‰
- [ ] Firebase Consoleã‹ã‚‰ãƒ†ã‚¹ãƒˆé€šçŸ¥ãŒå±Šãï¼ˆãƒ•ã‚©ã‚¢ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
- [ ] Firebase Consoleã‹ã‚‰ãƒ†ã‚¹ãƒˆé€šçŸ¥ãŒå±Šãï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰

### Firebase Console
- [ ] APNsèªè¨¼ã‚­ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹
- [ ] Cloud Messagingè¨­å®šãŒå®Œäº†ã—ã¦ã„ã‚‹

---

## ğŸ“š å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Google Mobile Ads SDK - iOS](https://developers.google.com/admob/ios/quick-start)
- [Firebase Cloud Messaging - iOS](https://firebase.google.com/docs/cloud-messaging/ios/client)
- [APNs Configuration](https://firebase.google.com/docs/cloud-messaging/ios/certs)
- [App Tracking Transparency](https://developer.apple.com/documentation/apptrackingtransparency)

---

**ä½œæˆè€…**: Claude (Cline)  
**æ—¥æ™‚**: 2026å¹´1æœˆ28æ—¥ 23:05  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.2+11
